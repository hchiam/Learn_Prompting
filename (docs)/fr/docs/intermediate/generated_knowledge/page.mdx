export const metadata = {
  sidebar_position: 7,
  title: "üü° Connaissances G√©n√©r√©es",
};

# üü° Connaissances G√©n√©r√©es

L'id√©e derri√®re l'approche des connaissances g√©n√©r√©es (@liu2021generated) est de demander au <Term term="LLM">LLM</Term> de g√©n√©rer des informations potentiellement utiles sur une question/prompt donn√©e avant de g√©n√©rer une r√©ponse finale.

Par exemple, supposons que vous vouliez √©crire un petit article de blog sur un animal, comme les [ours Kermode](https://fr.wikipedia.org/wiki/Ursus_americanus_kermodei). Avant de demander au <Term term="LLM">LLM</Term> d'√©crire l'article, vous pouvez lui demander de g√©n√©rer quelques faits sur les ours Kermode. Cela aidera le LLM √† √©crire un article plus informatif. Il existe deux fa√ßons simples de proc√©der.

## Approche √† prompt unique

La premi√®re approche demande au LLM de g√©n√©rer des connaissances puis d'√©crire l'article, le tout avec un seul prompt.

```text {3-13}
G√©n√®re 4 faits sur l'ours Kermode, puis utilise ces faits pour √©crire un court article de blog en utilisant ces informations :

L'ours Kermode, √©galement connu sous le nom d'ours esprit, est une sous-esp√®ce rare de l'ours noir am√©ricain que l'on trouve dans les r√©gions c√¥ti√®res de la Colombie-Britannique, au Canada.

1. L'ours Kermode est une sous-esp√®ce unique de l'ours noir am√©ricain, avec environ 10% de la population ayant une fourrure blanche.

2. L'ours Kermode est un symbole pour les peuples des Premi√®res Nations de la Colombie-Britannique, et est consid√©r√© comme un animal spirituel.

3. L'ours Kermode est une partie importante de l'√©cosyst√®me, aidant √† disperser les graines et √† maintenir l'√©quilibre de la for√™t.

4. L'ours Kermode est une esp√®ce prot√©g√©e, et sa population est √©troitement surveill√©e par le gouvernement provincial.

L'ours Kermode est un animal unique et sp√©cial que l'on trouve dans les r√©gions c√¥ti√®res de la Colombie-Britannique, au Canada. Environ 10% de la population de cette sous-esp√®ce de l'ours noir am√©ricain ont une fourrure blanche, ce qui en fait une vision rare. L'ours Kermode est un symbole pour les peuples des Premi√®res Nations de la Colombie-Britannique, et est consid√©r√© comme un animal spirituel. Il est une partie importante de l'√©cosyst√®me, aidant √† disperser les graines et √† maintenir l'√©quilibre de la for√™t. L'ours Kermode est une esp√®ce prot√©g√©e, et sa population est √©troitement surveill√©e par le gouvernement provincial. C'est un animal beau et majestueux, et il est important que nous fassions notre part pour prot√©ger et conserver cette esp√®ce.
```

## Approche √† double prompt

Dans cette approche, nous demandons d'abord au <Term term="LLM">LLM</Term> de g√©n√©rer des faits sur l'ours :

```text {3-9}
G√©n√®re 10 faits sur l'ours Kermode :

1. L'ours Kermode, √©galement connu sous le nom d'Ours Esprit, est une sous-esp√®ce rare de l'ours noir am√©ricain que l'on trouve en Colombie-Britannique, au Canada.

2. L'ours Kermode a un pelage blanc ou de couleur cr√®me unique, qui est caus√© par un g√®ne r√©cessif.

3. L'ours Kermode est un symbole d'espoir et de renouveau pour les peuples des Premi√®res Nations de la Colombie-Britannique.

4. L'ours Kermode est une esp√®ce prot√©g√©e et est r√©pertori√© comme une esp√®ce pr√©occupante par le Comit√© sur la situation des esp√®ces en p√©ril au Canada.
```

Ensuite, nous int√©grons ces informations dans un autre prompt pour √©crire l'article de blog :

```text {12-14}
1. L'ours Kermode, √©galement connu sous le nom d'Ours Esprit, est une sous-esp√®ce rare de l'ours noir am√©ricain que l'on trouve en Colombie-Britannique, au Canada.

2. L'ours Kermode a un pelage blanc ou de couleur cr√®me unique, qui est caus√© par un g√®ne r√©cessif.

3. L'ours Kermode est un symbole d'espoir et de renouveau pour les peuples des Premi√®res Nations de la Colombie-Britannique.

4. L'ours Kermode est une esp√®ce prot√©g√©e et est r√©pertori√© comme une esp√®ce pr√©occupante par le Comit√© sur la situation des esp√®ces en p√©ril au Canada.

Utilise les faits ci-dessus pour √©crire un paragraphe d'article de blog sur l'ours Kermode :



L'ours Kermode, √©galement connu sous le nom d'Ours Esprit, est une sous-esp√®ce rare de l'ours noir am√©ricain que l'on trouve en Colombie-Britannique, au Canada. Cet ours unique a un pelage blanc ou de couleur cr√®me, caus√© par un g√®ne r√©cessif, et est un symbole d'espoir et de renouveau pour les peuples des Premi√®res Nations de la Colombie-Britannique. L'ours Kermode est une esp√®ce prot√©g√©e et est r√©pertori√© comme une esp√®ce pr√©occupante par le Comit√© sur la situation des esp√®ces en p√©ril au Canada, ce qui en fait une partie importante de la biodiversit√© de la r√©gion.
```

Je recommande cette seconde approche car elle peut produire un contenu plus long de mani√®re plus fiable.

## Un autre cas d'utilisation

L'approche des connaissances g√©n√©r√©es a en fait √©t√© introduite pour une t√¢che compl√®tement diff√©rente, celle de r√©pondre √† des questions difficiles. Consid√©rez la question suivante, √† laquelle GPT-3 r√©pond incorrectement :

<iframe
  src="https://embed.learnprompting.org/embed?config=eyJ0b3BQIjoxLCJ0ZW1wZXJhdHVyZSI6MCwibWF4VG9rZW5zIjo0MSwib3V0cHV0IjoiU291dGggQWZyaWNhIGlzIGxhcmdlciB0aGFuIENvbmdvLiIsInByb21wdCI6IldoaWNoIGNvdW50cnkgaXMgbGFyZ2VyLCBDb25nbyBvciBTb3V0aCBBZnJpY2E%2FIiwibW9kZWwiOiJ0ZXh0LWRhdmluY2ktMDAzIn0%3D"
  style={{
    width: "100%",
    height: "200px",
    border: "0",
    borderRadius: "4px",
    overflow: "hidden",
  }}
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

<Note>Cet exemple peut ne pas √™tre pr√©cis. Nous travaillons √† le r√©viser.</Note>

<br />

Si nous demandons d'abord au <Term term="LLM">LLM</Term> de g√©n√©rer des faits sur le Congo et l'Afrique du Sud, nous pouvons ensuite utiliser ces informations pour r√©pondre correctement √† la question. En th√©orie, cela est similaire au <Term term="CoT prompting">prompting CoT</Term>, puisque nous amenons effectivement le LLM √† g√©n√©rer un raisonnement interm√©diaire sous forme de faits connexes.

Commen√ßons par la premi√®re √©tape, la _g√©n√©ration de connaissances_. Nous pouvons demander au <Term term="LLM">LLM</Term> de g√©n√©rer des faits sur le Congo et l'Afrique du Sud :

<iframe
  src="https://embed.learnprompting.org/embed?config=eyJ0b3BQIjoxLCJ0ZW1wZXJhdHVyZSI6MCwibWF4VG9rZW5zIjo0MSwib3V0cHV0IjoiU291dGggQWZyaWNhIGlzIHRoZSAyNXRoIGxhcmdlc3QgY291bnRyeSBpbiB0aGUgd29ybGQsIHdpdGggYW4gYXJlYSBvZiAxLDIyMSwwMzcgc3F1YXJlIGtpbG9tZXRlcnMgKDQ3MSw0NDUgc3F1YXJlIG1pbGVzKS4gQ29uZ28sIG9uIHRoZSBvdGhlciBoYW5kLCBpcyB0aGUgMTF0aCBsYXJnZXN0IGNvdW50cnkgaW4gdGhlIHdvcmxkLCB3aXRoIGFuIGFyZWEgb2YgMiwzNDQsODU4IHNxdWFyZSBraWxvbWV0ZXJzICg5MDUsNTY3IHNxdWFyZSBtaWxlcykuIFNvdXRoIEFmcmljYSBpcyBhbG1vc3QgaGFsZiB0aGUgc2l6ZSBvZiBDb25nbywgd2l0aCBhIHBvcHVsYXRpb24gb2YgNTcuNyBtaWxsaW9uIGNvbXBhcmVkIHRvIENvbmdvJ3MgcG9wdWxhdGlvbiBvZiA4NC4zIG1pbGxpb24uIFNvdXRoIEFmcmljYSBpcyB0aGUgbW9zdCBwb3B1bG91cyBjb3VudHJ5IGluIHRoZSByZWdpb24sIHdoaWxlIENvbmdvIGlzIHRoZSBzZWNvbmQgbW9zdCBwb3B1bG91cy4iLCJwcm9tcHQiOiJHZW5lcmF0ZSBzb21lIGtub3dsZWRnZSBhYm91dCB0aGUgc2l6ZXMgb2YgU291dGggQWZyaWNhIGFuZCBDb25nbzoiLCJtb2RlbCI6InRleHQtZGF2aW5jaS0wMDMifQ%3D%3D"
  style={{
    width: "100%",
    height: "500px",
    border: "0",
    borderRadius: "4px",
    overflow: "hidden",
  }}
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

<br />

Ensuite, utilisons ces connaissances pour r√©pondre correctement √† la question. C'est l'√©tape d'_int√©gration des connaissances_ !

<iframe
  src="https://embed.learnprompting.org/embed?config=eyJ0b3BQIjoxLCJ0ZW1wZXJhdHVyZSI6MCwibWF4VG9rZW5zIjo0MSwib3V0cHV0IjoiQ29uZ28gaXMgbGFyZ2VyIHRoYW4gU291dGggQWZyaWNhLlxuIiwicHJvbXB0IjoiU291dGggQWZyaWNhIGlzIHRoZSAyNXRoIGxhcmdlc3QgY291bnRyeSBpbiB0aGUgd29ybGQsIHdpdGggYW4gYXJlYSBvZiAxLDIyMSwwMzcgc3F1YXJlIGtpbG9tZXRlcnMgKDQ3MSw0NDUgc3F1YXJlIG1pbGVzKS4gQ29uZ28sIG9uIHRoZSBvdGhlciBoYW5kLCBpcyB0aGUgMTF0aCBsYXJnZXN0IGNvdW50cnkgaW4gdGhlIHdvcmxkLCB3aXRoIGFuIGFyZWEgb2YgMiwzNDQsODU4IHNxdWFyZSBraWxvbWV0ZXJzICg5MDUsNTY3IHNxdWFyZSBtaWxlcykuIFNvdXRoIEFmcmljYSBpcyBhbG1vc3QgaGFsZiB0aGUgc2l6ZSBvZiBDb25nbywgd2l0aCBhIHBvcHVsYXRpb24gb2YgNTcuNyBtaWxsaW9uIGNvbXBhcmVkIHRvIENvbmdvJ3MgcG9wdWxhdGlvbiBvZiA4NC4zIG1pbGxpb24uIFNvdXRoIEFmcmljYSBpcyB0aGUgbW9zdCBwb3B1bG91cyBjb3VudHJ5IGluIHRoZSByZWdpb24sIHdoaWxlIENvbmdvIGlzIHRoZSBzZWNvbmQgbW9zdCBwb3B1bG91cy5cblxuV2hpY2ggY291bnRyeSBpcyBsYXJnZXIsIENvbmdvIG9yIFNvdXRoIEFmcmljYT8iLCJtb2RlbCI6InRleHQtZGF2aW5jaS0wMDMifQ%3D%3D"
  style={{
    width: "100%",
    height: "500px",
    border: "0",
    borderRadius: "4px",
    overflow: "hidden",
  }}
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

## Une discussion plus technique

Bien que le cas d'utilisation ci-dessus soit similaire √† la fa√ßon dont les connaissances g√©n√©r√©es ont √©t√© introduites √† l'origine, ce n'est pas exactement la m√™me chose. Le contenu ci-dessous couvre le contexte plus technique dans lequel l'approche a √©t√© introduite. Il suit les deux √©tapes interm√©diaires (g√©n√©ration de connaissances et int√©gration de connaissances) que nous avons vues ci-dessus.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/intermediate/knowledge_generation.webp"
    width={1018}
    height={242}
    style={{ width: "750px", margin: "auto" }}
  />
</div>

<div style={{ textAlign: "center" }}>Connaissances G√©n√©r√©es (Liu et al.)</div>

### G√©n√©ration de Connaissances

Dans l'√©tape de g√©n√©ration de connaissances, on demande au <Term term="LLM">LLM</Term> de g√©n√©rer un ensemble de faits
sur la **question**. Le LLM est invit√© de mani√®re few-shot comme on le voit ci-dessous.
M diff√©rentes compl√©tions sont g√©n√©r√©es en utilisant ce m√™me prompt (similaire √† l'approche de self-consistency).

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/intermediate/gen_k_p1.webp"
    width={1122}
    height={428}
    style={{ width: "500px", margin: "auto" }}
  />
</div>

<div style={{ textAlign: "center" }}>
  Exemple de Connaissances G√©n√©r√©es (Liu et al.)
</div>

### Int√©gration de Connaissances

Ensuite, nous g√©n√©rons des questions "augment√©es de connaissances" et invitons le <Term term="LLM">LLM</Term> avec celles-ci
pour obtenir des r√©ponses finales. La fa√ßon la plus simple de comprendre cela est de passer par un exemple.

Supposons que nous essayons de r√©pondre √† la **question**
"La plupart des kangourous ont \<mask\> membres". Supposons qu'√† l'√©tape de g√©n√©ration de connaissances
nous avons g√©n√©r√© 2 connaissances (M=2) :

- Connaissance 1 : `Les kangourous sont des marsupiaux qui vivent en Australie.`

- Connaissance 2 : `Les kangourous sont des marsupiaux qui ont 5 membres.`

Maintenant, nous concat√©nons chaque connaissance avec la question pour g√©n√©rer des questions augment√©es de connaissances :

- Question Augment√©e de Connaissance 1 : `La plupart des kangourous ont <mask> membres. Les kangourous sont des marsupiaux qui vivent en Australie.`

- Question Augment√©e de Connaissance 2 : `La plupart des kangourous ont <mask> membres. Les kangourous sont des marsupiaux qui ont 5 membres.`

Nous invitons ensuite le LLM avec ces questions augment√©es de connaissances et obtenons les propositions de r√©ponses finales :

- R√©ponse 1 : `4`

- R√©ponse 2 : `5`

Nous s√©lectionnons la r√©ponse avec la plus haute probabilit√© comme r√©ponse finale. La
plus haute probabilit√© pourrait √™tre la probabilit√© softmax du token de r√©ponse, ou la
log-probabilit√© du/des token(s) de r√©ponse.

## Mod√®les de Langage Augment√©s par R√©citation

L'approche augment√©e par r√©citation (@sun2022recitationaugmented) est similaire aux connaissances g√©n√©r√©es (fondamentalement la m√™me). Cependant, elle est beaucoup moins complexe que l'impl√©mentation formelle des connaissances g√©n√©r√©es.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/intermediate/recitation.webp"
    width={610}
    height={686}
    style={{ width: "250px", margin: "auto" }}
  />
</div>

L'id√©e ici est d'inviter le LLM en few-shot √† g√©n√©rer des informations _et_ √† r√©pondre dans la _m√™me_ √©tape. Le fait qu'il r√©cite/g√©n√®re des connaissances et r√©ponde √† la question dans la m√™me √©tape est la principale diff√©rence par rapport √† l'approche des connaissances g√©n√©r√©es.

Pour r√©p√©ter, cette approche invite le mod√®le avec plusieurs exemplaires (question, r√©citation, r√©ponse), puis pose la question. Les auteurs notent que cette approche peut √™tre combin√©e avec la self-consistency ou plusieurs chemins de compl√©tion.

## Notes

- Les connaissances g√©n√©r√©es montrent des am√©liorations sur divers ensembles de donn√©es de sens commun.

- La connaissance correspondant √† la r√©ponse s√©lectionn√©e est appel√©e la _connaissance s√©lectionn√©e_.

- En pratique, vous pourriez prendre la r√©ponse la plus fr√©quemment donn√©e comme r√©ponse finale.
