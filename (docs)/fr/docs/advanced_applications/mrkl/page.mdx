export const metadata = { sidebar_position: 2, title: "üü° Les LLMs utilisant des outils" };

# üü° Les LLMs utilisant des outils

Les syst√®mes MRKL(@karpas2022mrkl) (Modular Reasoning, Knowledge and Language, prononc√© "miracle")
sont une **architecture neuro-symbolique** qui combine les LLMs (calcul neuronal) et des outils
externes comme les calculatrices (calcul symbolique) pour r√©soudre des probl√®mes complexes.

Un syst√®me MRKL est compos√© d'un ensemble de modules (par exemple, une calculatrice, une API m√©t√©o, une base de donn√©es, etc.) et d'un routeur qui d√©cide comment 'router' les requ√™tes en langage naturel vers le module appropri√©.

Un exemple simple d'un syst√®me MRKL est un LLM qui peut
utiliser une application calculatrice. C'est un syst√®me √† module unique, o√π le LLM est le routeur.
Lorsqu'on lui demande `Combien fait 100*100 ?`, le LLM peut choisir d'
extraire les nombres de la requ√™te, puis dire au syst√®me MRKL d'utiliser une application
calculatrice pour calculer le r√©sultat. Cela pourrait ressembler √† ceci :

<pre>
  <p>Combien fait 100*100 ?</p>

  <span className="bluegreen-highlight">CALCULATOR[100*100]</span>
</pre>

Le syst√®me MRKL verrait le mot `CALCULATOR` et ins√©rerait `100*100` dans l'application calculatrice.
Cette id√©e simple peut facilement √™tre √©tendue √† divers outils de calcul symbolique.

Voici d'autres exemples d'applications :

- Un chatbot capable de r√©pondre √† des questions sur une base de donn√©es financi√®re en
  extrayant des informations pour former une requ√™te SQL √† partir du texte des utilisateurs.

<pre>
  <p>Quel est le prix actuel de l'action Apple ?</p>

  <span className="bluegreen-highlight">
    Le prix actuel est DATABASE[SELECT price FROM stock WHERE company =
    "Apple" AND time = "now"].
  </span>
</pre>

- Un chatbot capable de r√©pondre √† des questions sur la m√©t√©o en extrayant
  des informations du prompt et en utilisant une API m√©t√©o pour r√©cup√©rer l'information.

<pre>
  <p>Quel temps fait-il √† Paris ?</p>

  <span className="bluegreen-highlight">
    Le temps est WEATHER_API[Paris].
  </span>
</pre>

- Ou m√™me des t√¢ches beaucoup plus complexes qui d√©pendent de plusieurs sources de donn√©es,
  comme l'exemple suivant :

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl_task.webp"
    width={1600}
    height={1331}
    style={{ width: "500px", margin: "auto" }}
  />
</div>

<div style={{ textAlign: "center" }}>Exemple de syst√®me MRKL (AI21)</div>

## Un exemple

J'ai reproduit un exemple de syst√®me MRKL tir√© de l'article original, en utilisant Dust.tt,
accessible [ici](https://dust.tt/w/ddebdfcdde/a/98bdd65cb7).
Le syst√®me lit un probl√®me math√©matique (par exemple `Combien fait 20 fois 5^6 ?`), extrait les nombres et les op√©rations,
et les reformate pour une application calculatrice (par exemple `20*5^6`). Il envoie ensuite l'√©quation reformat√©e
√† l'application calculatrice de Google et renvoie le r√©sultat. Notez que l'article original effectue un ajustement du prompt sur le routeur (le LLM), ce que je ne fais pas dans cet exemple. Voyons comment cela fonctionne :

Tout d'abord, j'ai cr√©√© un simple jeu de donn√©es dans l'onglet `Datasets` de Dust.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl/dataset.webp"
    width={2818}
    height={820}
    style={{ width: "750px", margin: "0" }}
  />
</div>

Ensuite, je suis pass√© √† l'onglet `Specification` et j'ai charg√© le jeu de donn√©es en utilisant un bloc `input`.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl/load_dataset.webp"
    width={2790}
    height={508}
    style={{ width: "750px", margin: "0" }}
  />
</div>

Ensuite, j'ai cr√©√© un bloc `llm` qui extrait les nombres et les op√©rations. Remarquez comment
dans le prompt, j'ai indiqu√© que nous utiliserions la calculatrice Google. Le mod√®le que j'utilise (GPT-3)
a probablement une certaine connaissance de la calculatrice Google gr√¢ce √† son pr√©-entra√Ænement.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl/model.webp"
    width={2790}
    height={960}
    style={{ width: "750px", margin: "0" }}
  />
</div>

Puis, j'ai cr√©√© un bloc `code` qui ex√©cute un simple code javascript pour supprimer
les espaces de la compl√©tion.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl/extract.webp"
    width={2790}
    height={532}
    style={{ width: "750px", margin: "0" }}
  />
</div>

Enfin, j'ai cr√©√© un bloc `search` qui envoie l'√©quation reformat√©e √† la calculatrice Google.

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl/search.webp"
    width={2790}
    height={1310}
    style={{ width: "750px", margin: "0" }}
  />
</div>

Ci-dessous, nous pouvons voir les r√©sultats finaux, qui sont tous corrects !

<div style={{ textAlign: "center" }}>
  <Image
    src="/docs/assets/advanced/mrkl/final.webp"
    width={2784}
    height={494}
    style={{ width: "750px", margin: "0" }}
  />
</div>

N'h√©sitez pas √† cloner et exp√©rimenter avec ce playground [ici](https://dust.tt/w/ddebdfcdde/a/98bdd65cb7).

## Notes

MRKL a √©t√© d√©velopp√© par [AI21](https://www.ai21.com/) et utilisait initialement leur
LLM J-1 (Jurassic 1)(@lieberjurassic).

## Pour aller plus loin

Consultez [cet exemple](https://python.langchain.com/docs/modules/agents/how_to/mrkl) d'un syst√®me MRKL
construit avec LangChain.
